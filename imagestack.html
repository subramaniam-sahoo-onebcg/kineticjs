<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <div id="container" style="float:left;"></div>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.6.0.min.js"></script>
    <input  style="" type="button" value="Add Chips" name="chips" onclick="addimage();"/>
    <script >

        var stage = new Kinetic.Stage({
          container: 'container',
          width: 1520,
          height: 1241
        });
        var layer = new Kinetic.Layer();


        /*Table*/
        function imageTable(callback) {
          var imageObj = new Image();
          imageObj.onload = function() {
            var kineticimg = new Kinetic.Image({
              x: 0,
              y: 0,
              image: imageObj,
              width: 1420,
              height: 1041
            });

            // add the shape to the layer
            layer.add(kineticimg);

            // add the layer to the stage
            stage.add(layer);
            kineticimg.setZIndex(1);
            callback(imageObj.src);
          };
          imageObj.src = 'images/Table.jpg';

        }

        imageTable(function(imageObj) {
//          console.log(imageObj);
//          /*Table*/
//          var group = new Kinetic.Group({
//            draggable: true
//          });
//          function image1(callback) {
//            var imageObj2 = new Image();
//            imageObj2.onload = function() {
//              var kineticimg2 = new Kinetic.Image({
//                x: 420,
//                y: 620,
//                image: imageObj2,
//                width: 20,
//                height: 20
//              });
//
//              // add the shape to the layer
//              //  layer.add(kineticimg2);
//
//              group.add(kineticimg2);
//              // add the shape to the layer
//              layer.add(group);
//              stage.add(layer);
//              kineticimg2.setZIndex(4);
//              callback();
//            };
//            imageObj2.src = 'images/Red-Chip.png';
//            console.log('image1');
//
//          }
//          function image2(callback) {
//            var imageObj2 = new Image();
//            imageObj2.onload = function() {
//              var kineticimg2 = new Kinetic.Image({
//                x: 420,
//                y: 618,
//                image: imageObj2,
//                width: 20,
//                height: 20
//              });
//              group.add(kineticimg2);
//              // add the shape to the layer
//              layer.add(group);
//              stage.add(layer);
//              kineticimg2.setZIndex(5);
//
//              callback();
//
//            };
//            imageObj2.src = 'images/Red-Chip.png';
//            console.log('image2');
//
//          }
//          function image3(callback) {
//            var imageObj2 = new Image();
//            imageObj2.onload = function() {
//              var kineticimg2 = new Kinetic.Image({
//                x: 420,
//                y: 616,
//                image: imageObj2,
//                width: 20,
//                height: 20
//              });
//              // add the shape to the layer
//              group.add(kineticimg2);
//              // add the shape to the layer
//              layer.add(group);
//              stage.add(layer);
//              kineticimg2.setZIndex(6);
//              callback();
//              group.add(kineticimg2);
//            };
//            imageObj2.src = 'images/Red-Chip.png';
//            console.log('image3');
//
//          }
//          image1(function() {
//            image2(function() {
//              image3(function() {
//                console.log('All images loaded');
//              });
//            });
//          });
        });
        var x = 614;
        function addimage() {
          for (var i = 1; i <= 10; i++) {
            var imageObj2 = new Image();

            imageObj2.onload = function() {
              var kineticimg2 = new Kinetic.Image({
                x: 420,
                y: x - 3,
                image: imageObj2,
                width: 20,
                height: 20
              });
              x = x - 3;
              // add the shape to the layer

              // add the shape to the layer
              layer.add(kineticimg2);
              stage.add(layer);

              kineticimg2.setZIndex(6);
            };
            imageObj2.src = 'images/Red-Chip.png';
            console.log(614 - i * 2);
          }
        }
    </script>
  </body>
</html>